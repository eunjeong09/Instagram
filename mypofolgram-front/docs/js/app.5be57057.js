(function(){"use strict";var e={2712:function(e,t,o){var n=o(9963),s=o(6252);function r(e,t,o,n,r,a){const i=(0,s.up)("Header"),l=(0,s.up)("router-view"),c=(0,s.up)("Footer");return(0,s.wg)(),(0,s.iD)("div",null,[a.showHeader?((0,s.wg)(),(0,s.j4)(i,{key:0})):(0,s.kq)("",!0),(0,s.Wm)(l),a.showFooter?((0,s.wg)(),(0,s.j4)(c,{key:1})):(0,s.kq)("",!0)])}var a=o(3577);const i=e=>((0,s.dD)("data-v-120de58c"),e=e(),(0,s.Cn)(),e),l={class:"header"},c={class:"logo"},u={class:"iconList"},d={class:"plusWrap"},p={key:0,class:"createModal"},f=i((()=>(0,s._)("span",null,"게시물",-1))),m=i((()=>(0,s._)("i",{class:"fa-solid fa-table-cells"},null,-1))),h=[f,m],g=i((()=>(0,s._)("li",null,[(0,s._)("span",null,"스토리"),(0,s._)("i",{class:"fa-solid fa-circle-plus"})],-1))),v=i((()=>(0,s._)("li",null,[(0,s._)("span",null,"릴스"),(0,s._)("i",{class:"fa-solid fa-clapperboard"})],-1))),w=i((()=>(0,s._)("i",{class:"fa-solid fa-paper-plane"},null,-1))),y={class:"topWithButton"},b=i((()=>(0,s._)("i",null,null,-1))),k=i((()=>(0,s._)("p",{class:"bold center"},"새 게시물 만들기",-1))),I={key:0,class:"point"},_={key:0,class:"uploadBody1"},C=i((()=>(0,s._)("div",null,"사진과 동영상을 여기에 끌어다 놓으세요.",-1))),T=i((()=>(0,s._)("br",null,null,-1))),U={key:1,class:"imagesWrap uploadBody2",id:"uploadBody2"},D={class:"flex"},P={class:"w-3/4 mr-4"},F={ref:"cropperImage",src:"",class:"hidden",id:"cropperImage",alt:"image-edit"},A={key:2,class:"uploadBody3"},E={class:"leftArea"},j=["src"],O={class:"rightArea"},x=["src"],S=["textContent"],$=i((()=>(0,s._)("div",null,null,-1)));function B(e,t,o,r,i,f){const m=(0,s.up)("new-post");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",l,[(0,s._)("h1",c,[(0,s._)("img",{src:"/images/logo.png",alt:"",onClick:t[0]||(t[0]=e=>f.moveTo("/"))})]),(0,s._)("div",u,[(0,s._)("div",d,[(0,s._)("i",{class:"fa-solid fa-square-plus",onClick:t[1]||(t[1]=(...e)=>f.toggle&&f.toggle(...e))}),i.isCreate?((0,s.wg)(),(0,s.iD)("div",p,[(0,s._)("ul",null,[(0,s._)("li",{onClick:t[2]||(t[2]=e=>f.show("showRegister"))},h),g,v])])):(0,s.kq)("",!0)]),(0,s._)("i",{class:"fa-solid fa-heart",onClick:t[3]||(t[3]=e=>f.moveTo("/activity"))}),w,(0,s._)("img",{onClick:t[4]||(t[4]=e=>f.moveTo("/mypage")),src:"/images/example.jpeg",alt:"유저이미지"})])]),(0,s.Wm)(m,{show:i.showRegister,onClose:t[10]||(t[10]=e=>f.close("showRegister"))},{header:(0,s.w5)((()=>[(0,s._)("div",y,[b,k,0===i.files.length?((0,s.wg)(),(0,s.iD)("i",I)):(0,s.kq)("",!0),0!==i.files.length&&this.showUploadModal2?((0,s.wg)(),(0,s.iD)("i",{key:1,onClick:t[5]||(t[5]=e=>f.addContent()),class:"point"},"다음")):0===i.files.length||this.showUploadModal2?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("i",{key:2,onClick:t[6]||(t[6]=e=>f.upload()),class:"point"},"공유하기"))])])),body:(0,s.w5)((()=>[i.files.length?0!==i.files.length&&this.showUploadModal2?((0,s.wg)(),(0,s.iD)("div",U,[(0,s._)("div",D,[(0,s._)("div",P,[(0,s._)("img",F,null,512)])])])):((0,s.wg)(),(0,s.iD)("div",A,[(0,s._)("div",E,[(0,s._)("img",{src:i.cropped,alt:"cropped image"},null,8,j)]),(0,s._)("div",O,[(0,s._)("div",null,[(0,s._)("img",{src:e.getterUserInfo.userImgUrl,alt:""},null,8,x),(0,s._)("span",{class:"nickname",textContent:(0,a.zw)(e.getterUserInfo.userId)},null,8,S)]),(0,s.wy)((0,s._)("textarea",{"aria-label":"문구 입력...",placeholder:"문구 입력...",rows:"12","onUpdate:modelValue":t[9]||(t[9]=e=>i.content=e)},null,512),[[n.nr,i.content]])])])):((0,s.wg)(),(0,s.iD)("div",_,[C,(0,s._)("input",{ref:"fileInput",id:"input",type:"file",name:"image",accept:"image/*",multiple:"multiple",class:"input",onChange:t[7]||(t[7]=e=>f.uploadImage())},null,544),T,(0,s._)("div",{onClick:t[8]||(t[8]=t=>e.$refs.fileInput.click()),class:"buttonBackground"},"컴퓨터에서 선택")]))])),footer:(0,s.w5)((()=>[$])),_:1},8,["show"])],64)}const Z={class:"modal-wrapper"},M={class:"modal-container"},R={class:"modal-header"},L=(0,s.Uk)("default header"),N={class:"modal-body"},q=(0,s.Uk)("default body"),W={class:"modal-footer"},H=(0,s.Uk)(" default footer ");function z(e,t,o,r,a,i){return(0,s.wg)(),(0,s.j4)(n.uT,{name:"modal"},{default:(0,s.w5)((()=>[o.show?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"modal-mask",onClick:t[1]||(t[1]=e=>i.check(e))},[(0,s._)("div",Z,[(0,s._)("div",M,[(0,s._)("div",R,[(0,s.WI)(e.$slots,"header",{},(()=>[L]))]),(0,s._)("div",N,[(0,s.WI)(e.$slots,"body",{},(()=>[q]))]),(0,s._)("div",W,[(0,s.WI)(e.$slots,"footer",{},(()=>[H,(0,s._)("button",{class:"modal-default-button",onClick:t[0]||(t[0]=t=>e.$emit("close"))},"OK")]))])])])])):(0,s.kq)("",!0)])),_:3})}var K={props:{show:Boolean},methods:{check:function(e){let t=e.target;t.classList.contains("modal-wrapper")&&this.$emit("close")}}},J=o(3744);const V=(0,J.Z)(K,[["render",z]]);var Y=V,G=o(8108),Q=o(8637),X=o(3129),ee=o.n(X),te={components:{newPost:Y},computed:{...(0,Q.Se)("userInfo",["getterUserInfo"])},data(){return{isCreate:!1,imgTest:"/images/example.jpeg",showRegister:!1,selectedFile:null,showComplete:!1,images:"",files:[],filesPreview:[],uploadImageIndex:0,content:"",showUploadModal2:!1,multipartFiles:[],postDetailDto:{userId:"",content:""},cropperImage:{},cropper:{},cropped:""}},methods:{toggle(){this.isCreate=!this.isCreate},moveTo(e){this.$router.push({path:e})},show(e){this[e]=!0,this.isCreate=!1},close(e){switch(e){case"showRegister":this[e]=!1,this.files=[],this.filesPreview=[],this.uploadImageIndex=0;break;default:console.log("close 함수 실행")}},uploadImage(){let e=-1;for(let t=0;t<this.$refs.fileInput.files.length;t++)this.multipartFiles[t]=this.$refs.fileInput.files[t],this.files=[...this.files,{file:this.$refs.fileInput.files[t],preview:URL.createObjectURL(this.$refs.fileInput.files[t])}],e=t,this.filesPreview=[...this.filesPreview,{file:URL.createObjectURL(this.$refs.fileInput.files[t])}];this.uploadImageIndex=e+1,0!==this.filesPreview.length&&(this.showUploadModal2=!0,setTimeout((()=>{this.createImageUrl()}),1e3))},createImageUrl(){document.getElementById("cropperImage").src=this.files[0].preview,this.image=this.$refs.cropperImage,this.cropper=new(ee())(this.image,{dragMode:"move",aspectRatio:16/9,autoCropArea:.65,restore:!1,guides:!1,center:!1,highlight:!1,cropBoxMovable:!0,cropBoxResizable:!1,toggleDragModeOnDblclick:!1,preview:".preview",crop:()=>{const e=this.cropper.getCroppedCanvas();this.cropped=e.toDataURL("image/png"),console.log("여기 확인---");let t=this.multipartFiles[0].name;this.cropper.getCroppedCanvas().toBlob((e=>{const o=new FormData;for(var n of(o.append("croppedImage",e,t,.7),o.entries()))console.log(n[0]+", "+n[1])}))}})},addContent(){this.showUploadModal2=!1},async upload(){const e=new FormData;this.postDetailDto.userId=this.getterUserInfo.id,this.postDetailDto.content=this.content,this.multipartFiles.forEach((t=>{e.append("multipartFiles",t)})),e.append("postDetailDto",new Blob([JSON.stringify(this.postDetailDto)],{type:"application/json"})),await G.Z.post("/api/post/savePost",e,{headers:{"content-type":"multipart/form-data"}}).then((e=>{!0===e.data.result?console.log(!0):console.log(!1)})).finally(this.close("showRegister"))}}};const oe=(0,J.Z)(te,[["render",B],["__scopeId","data-v-120de58c"]]);var ne=oe;const se={class:"footer"},re=(0,s._)("i",{class:"fa-solid fa-clapperboard"},null,-1);function ae(e,t,o,n,r,a){return(0,s.wg)(),(0,s.iD)("div",se,[(0,s._)("i",{class:"fa-solid fa-house",onClick:t[0]||(t[0]=e=>a.moveTo("/"))}),(0,s._)("i",{class:"fa-solid fa-magnifying-glass",onClick:t[1]||(t[1]=e=>a.moveTo("/search"))}),re,(0,s._)("i",{class:"fa-solid fa-circle-user",onClick:t[2]||(t[2]=e=>a.moveTo("/mypage"))})])}var ie={methods:{moveTo(e){this.$router.push({path:e})}}};const le=(0,J.Z)(ie,[["render",ae]]);var ce=le,ue={name:"App",components:{Header:ne,Footer:ce},created(){},computed:{showHeader(){let e=["/mypage","/activity","/comment","/login","/mypostlist"];return e=e.filter((e=>this.$route.path.startsWith(e))),0===e.length},showFooter(){let e=["/mypage/modify","/comment","/login"];return e=e.filter((e=>this.$route.path.startsWith(e))),0===e.length}},methods:{}};const de=(0,J.Z)(ue,[["render",r]]);var pe=de,fe=o(2119),me=o(3349);const he=e=>(t,o,n)=>{const s=me.Z.getters["auth/isAuthenticated"];if(s&&e||!s&&!e)return n();n("/login")},ge=[{path:"/",name:"main",component:()=>Promise.all([o.e(662),o.e(430),o.e(220)]).then(o.bind(o,3250)),beforeEnter:he(!0)},{path:"/login",component:()=>o.e(776).then(o.bind(o,4776)),beforeEnter:he(!1)},{path:"/activity",component:()=>o.e(767).then(o.bind(o,767)),beforeEnter:he(!0)},{path:"/search",component:()=>o.e(36).then(o.bind(o,8036)),beforeEnter:he(!0)},{path:"/comment/:id",component:()=>Promise.all([o.e(662),o.e(219)]).then(o.bind(o,3219)),beforeEnter:he(!0)},{path:"/mypage",component:()=>Promise.all([o.e(662),o.e(430),o.e(868)]).then(o.bind(o,7651)),beforeEnter:he(!0),props:!0,meta:{}},{path:"/mypage/mypostlist",component:()=>Promise.all([o.e(662),o.e(430),o.e(207)]).then(o.bind(o,24)),beforeEnter:he(!0),props:!0,meta:{}},{path:"/mypage/follow/:page",props:!0,component:()=>o.e(633).then(o.bind(o,9633)),beforeEnter:he(!0),meta:{}},{path:"/mypage/modify",name:"modify",props:!0,component:()=>o.e(677).then(o.bind(o,8677)),beforeEnter:he(!0),meta:{}},{path:"/mypage/modifyProfile",name:"modifyProfile",props:!0,component:()=>o.e(175).then(o.bind(o,7175)),beforeEnter:he(!0),meta:{}},{path:"/story/:id",props:!0,component:()=>o.e(697).then(o.bind(o,6697)),beforeEnter:he(!0),meta:{}}];let ve=(0,fe.p7)({history:(0,fe.PO)("/"),routes:ge});var we=ve;const ye=(0,n.ri)(pe).use(we).use(me.Z);ye.mount("#app")},3349:function(e,t,o){o.d(t,{Z:function(){return D}});var n=o(8637),s={userInfo:{}},r=o(8108),a={async getUserInfo({state:e,commit:t}){const o=await r.Z.get("/api/user/getUserInfo",{params:{userId:e.userInfo.userId}});t("setUserInfo",o.data.result)},async setProfile({commit:e},t){const o=await r.Z.post("/api/user/setUserInfo",t);e("setUserInfo",o.data.result)}},i={setUserInfo:(e,t)=>{e.userInfo=t},setUserId:(e,t)=>{e.userInfo.userId=t}},l={getterUserInfo:e=>e.userInfo},c={namespaced:!0,state:s,actions:a,mutations:i,getters:l};const u="id_token",d=()=>window.localStorage.getItem(u),p=e=>{window.localStorage.setItem(u,e)},f=()=>{window.localStorage.removeItem(u)};var m={getToken:d,saveToken:p,destroyToken:f},h={count:0,token:{accessToken:m.getToken()},isAuthenticated:!!m.getToken()},g={login:function(e,t){let o={username:t.userId,password:t.password};return new Promise(((t,n)=>{r.Z.post("/api/authenticate",o).then((o=>{const{data:n}=o;sessionStorage.setItem("userId",n.result.userId),e.commit("login",{accessToken:n.result.httpHeaders.Authorization}),t(o)})).catch((e=>{n(e)}))}))},logout:function(e,t){return new Promise((o=>{setTimeout((function(){sessionStorage.removeItem("clear"),sessionStorage.clear(),e.commit("logout",t),o({})}),1e3)}))}},v={login:function(e,t={}){e.token.accessToken=t.accessToken,e.isAuthenticated=!0,m.saveToken(t.accessToken)},logout:function(e,t={}){e.token.accessToken="",e.isAuthenticated=!1,m.destroyToken()}},w={getAccessToken:function(e){return e.token.accessToken},isAuthenticated:function(e){return e.isAuthenticated}},y={namespaced:!0,state:h,actions:g,mutations:v,getters:w},b={postForComment:{id:"",content:"",createDate:"",hashtags:"",nickName:"",userImgUrl:""}},k={},I={setPostForComment:(e,t)=>{e.postForComment.id=t.id,e.postForComment.content=t.content,e.postForComment.createDate=t.createDate,e.postForComment.hashtags=t.hashtags,e.postForComment.nickName=t.nickName,e.postForComment.userImgUrl=t.userImgUrl}},_={getterPostForComment:e=>e.postForComment},C={namespaced:!0,state:b,actions:k,mutations:I,getters:_},T=o(4702);const U=(0,n.MT)({modules:{userInfo:c,auth:y,comment:C},plugins:[(0,T.Z)({paths:["userInfo","auth","comment"]})]});var D=U},8108:function(e,t,o){var n=o(9669),s=o.n(n),r=o(3349);const a=s().create({baseURL:"https://myportfoliogram.herokuapp.com",headers:{"content-type":"application/json"}});a.interceptors.request.use((e=>{const t=r.Z.getters["auth/isAuthenticated"];return t&&(e.headers.common["Authorization"]=r.Z.getters["auth/getAccessToken"]),e}),(e=>{Promise.reject(e)})),a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",t["Z"]=a}},t={};function o(n){var s=t[n];if(void 0!==s)return s.exports;var r=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.loaded=!0,r.exports}o.m=e,function(){var e=[];o.O=function(t,n,s,r){if(!n){var a=1/0;for(u=0;u<e.length;u++){n=e[u][0],s=e[u][1],r=e[u][2];for(var i=!0,l=0;l<n.length;l++)(!1&r||a>=r)&&Object.keys(o.O).every((function(e){return o.O[e](n[l])}))?n.splice(l--,1):(i=!1,r<a&&(a=r));if(i){e.splice(u--,1);var c=s();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[n,s,r]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.f={},o.e=function(e){return Promise.all(Object.keys(o.f).reduce((function(t,n){return o.f[n](e,t),t}),[]))}}(),function(){o.u=function(e){return"js/"+e+"."+{36:"c6d6a636",175:"a3c6e521",207:"40fdb001",219:"2755f97c",220:"0810e7d3",430:"67de46d7",633:"bfcf1c06",662:"6f7c0e7d",677:"f9365fc5",697:"6eaa9b73",767:"a2388b96",776:"a3977ca0",868:"b6299347"}[e]+".js"}}(),function(){o.miniCssF=function(e){return"css/"+e+"."+{36:"0b56dbff",207:"55495568",220:"55495568",776:"bfc35c9d",868:"dc2f7e34"}[e]+".css"}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="mypofolgram-front:";o.l=function(n,s,r,a){if(e[n])e[n].push(s);else{var i,l;if(void 0!==r)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==t+r){i=d;break}}i||(l=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,o.nc&&i.setAttribute("nonce",o.nc),i.setAttribute("data-webpack",t+r),i.src=n),e[n]=[s];var p=function(t,o){i.onerror=i.onload=null,clearTimeout(f);var s=e[n];if(delete e[n],i.parentNode&&i.parentNode.removeChild(i),s&&s.forEach((function(e){return e(o)})),t)return t(o)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=p.bind(null,i.onerror),i.onload=p.bind(null,i.onload),l&&document.head.appendChild(i)}}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){o.p="/"}(),function(){var e=function(e,t,o,n){var s=document.createElement("link");s.rel="stylesheet",s.type="text/css";var r=function(r){if(s.onerror=s.onload=null,"load"===r.type)o();else{var a=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=a,l.request=i,s.parentNode.removeChild(s),n(l)}};return s.onerror=s.onload=r,s.href=t,document.head.appendChild(s),s},t=function(e,t){for(var o=document.getElementsByTagName("link"),n=0;n<o.length;n++){var s=o[n],r=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(r===e||r===t))return s}var a=document.getElementsByTagName("style");for(n=0;n<a.length;n++){s=a[n],r=s.getAttribute("data-href");if(r===e||r===t)return s}},n=function(n){return new Promise((function(s,r){var a=o.miniCssF(n),i=o.p+a;if(t(a,i))return s();e(n,i,s,r)}))},s={143:0};o.f.miniCss=function(e,t){var o={36:1,207:1,220:1,776:1,868:1};s[e]?t.push(s[e]):0!==s[e]&&o[e]&&t.push(s[e]=n(e).then((function(){s[e]=0}),(function(t){throw delete s[e],t})))}}(),function(){var e={143:0};o.f.j=function(t,n){var s=o.o(e,t)?e[t]:void 0;if(0!==s)if(s)n.push(s[2]);else{var r=new Promise((function(o,n){s=e[t]=[o,n]}));n.push(s[2]=r);var a=o.p+o.u(t),i=new Error,l=function(n){if(o.o(e,t)&&(s=e[t],0!==s&&(e[t]=void 0),s)){var r=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;i.message="Loading chunk "+t+" failed.\n("+r+": "+a+")",i.name="ChunkLoadError",i.type=r,i.request=a,s[1](i)}};o.l(a,l,"chunk-"+t,t)}},o.O.j=function(t){return 0===e[t]};var t=function(t,n){var s,r,a=n[0],i=n[1],l=n[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(s in i)o.o(i,s)&&(o.m[s]=i[s]);if(l)var u=l(o)}for(t&&t(n);c<a.length;c++)r=a[c],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(u)},n=self["webpackChunkmypofolgram_front"]=self["webpackChunkmypofolgram_front"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[998],(function(){return o(2712)}));n=o.O(n)})();
//# sourceMappingURL=app.5be57057.js.map